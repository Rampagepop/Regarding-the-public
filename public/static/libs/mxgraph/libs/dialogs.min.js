var OpenDialog=function(){var e=document.createElement("iframe");e.style.backgroundColor="transparent",e.allowTransparency="true",e.style.borderStyle="none",e.style.borderWidth="0px",e.style.overflow="hidden",e.frameBorder="0";var t=mxClient.IS_VML&&(null==document.documentMode||document.documentMode<8)?20:0;e.setAttribute("width",(Editor.useLocalStorage?640:320)+t+"px"),e.setAttribute("height",(Editor.useLocalStorage?480:220)+t+"px"),e.setAttribute("src",OPEN_FORM),this.container=e},ColorDialog=function(e,t,l,n){this.editorUi=e;var i=document.createElement("input");i.style.marginBottom="10px",i.style.width="216px",mxClient.IS_IE&&(i.style.marginTop="10px",document.body.appendChild(i)),this.init=function(){mxClient.IS_TOUCH||i.focus()};var a=new jscolor.color(i);a.pickerOnfocus=!1,a.showPicker();var o=document.createElement("div");jscolor.picker.box.style.position="relative",jscolor.picker.box.style.width="230px",jscolor.picker.box.style.height="100px",jscolor.picker.box.style.paddingBottom="10px",o.appendChild(jscolor.picker.box);var r=document.createElement("center");function d(){var e=s(0==ColorDialog.recentColors.length?["FFFFFF"]:ColorDialog.recentColors,11,"FFFFFF",!0);return e.style.marginBottom="8px",e}function s(e,t,l,n){t=null!=t?t:12;var o=document.createElement("table");o.style.borderCollapse="collapse",o.setAttribute("cellspacing","0"),o.style.marginBottom="20px",o.style.cellSpacing="0px";var s=document.createElement("tbody");o.appendChild(s);for(var c=e.length/t,u=0;u<c;u++){for(var p=document.createElement("tr"),m=0;m<t;m++)!function(e){var t=document.createElement("td");t.style.border="1px solid black",t.style.padding="0px",t.style.width="16px",t.style.height="16px",null==e&&(e=l),"none"==e?t.style.background="url('"+Dialog.prototype.noColorImage+"')":t.style.backgroundColor="#"+e,p.appendChild(t),null!=e&&(t.style.cursor="pointer",mxEvent.addListener(t,"click",function(){"none"==e?(a.fromString("ffffff"),i.value="none"):a.fromString(e)}))}(e[u*t+m]);s.appendChild(p)}if(n){var g=document.createElement("td");g.setAttribute("title",mxResources.get("reset")),g.style.border="1px solid black",g.style.padding="0px",g.style.width="16px",g.style.height="16px",g.style.backgroundImage="url('"+Dialog.prototype.closeImage+"')",g.style.backgroundPosition="center center",g.style.backgroundRepeat="no-repeat",g.style.cursor="pointer",p.appendChild(g),mxEvent.addListener(g,"click",function(){ColorDialog.resetRecentColors(),o.parentNode.replaceChild(d(),o)})}return r.appendChild(o),o}o.appendChild(i),mxUtils.br(o),d();var c=s(this.presetColors);c.style.marginBottom="8px",(c=s(this.defaultColors)).style.marginBottom="16px",o.appendChild(r);var u=document.createElement("div");u.style.textAlign="right",u.style.whiteSpace="nowrap";var p=mxUtils.button(mxResources.get("cancel"),function(){e.hideDialog(),null!=n&&n()});p.className="geBtn",e.editor.cancelFirst&&u.appendChild(p);var m=null!=l?l:this.createApplyFunction(),g=mxUtils.button(mxResources.get("apply"),function(){var t=i.value;/(^#?[a-zA-Z0-9]*$)/.test(t)?("none"!=t&&"#"!=t.charAt(0)&&(t="#"+t),ColorDialog.addRecentColor("none"!=t?t.substring(1):t,12),m(t),e.hideDialog()):e.handleError({message:mxResources.get("invalidInput")})});g.className="geBtn gePrimaryBtn",u.appendChild(g),e.editor.cancelFirst||u.appendChild(p),null!=t&&("none"==t?(a.fromString("ffffff"),i.value="none"):a.fromString(t)),o.appendChild(u),this.picker=a,this.colorInput=i,mxEvent.addListener(o,"keydown",function(t){27==t.keyCode&&(e.hideDialog(),null!=n&&n(),mxEvent.consume(t))}),this.container=o};ColorDialog.prototype.presetColors=["E6D0DE","CDA2BE","B5739D","E1D5E7","C3ABD0","A680B8","D4E1F5","A9C4EB","7EA6E0","D5E8D4","9AC7BF","67AB9F","D5E8D4","B9E0A5","97D077","FFF2CC","FFE599","FFD966","FFF4C3","FFCE9F","FFB570","F8CECC","F19C99","EA6B66"],ColorDialog.prototype.defaultColors=["none","FFFFFF","E6E6E6","CCCCCC","B3B3B3","999999","808080","666666","4D4D4D","333333","1A1A1A","000000","FFCCCC","FFE6CC","FFFFCC","E6FFCC","CCFFCC","CCFFE6","CCFFFF","CCE5FF","CCCCFF","E5CCFF","FFCCFF","FFCCE6","FF9999","FFCC99","FFFF99","CCFF99","99FF99","99FFCC","99FFFF","99CCFF","9999FF","CC99FF","FF99FF","FF99CC","FF6666","FFB366","FFFF66","B3FF66","66FF66","66FFB3","66FFFF","66B2FF","6666FF","B266FF","FF66FF","FF66B3","FF3333","FF9933","FFFF33","99FF33","33FF33","33FF99","33FFFF","3399FF","3333FF","9933FF","FF33FF","FF3399","FF0000","FF8000","FFFF00","80FF00","00FF00","00FF80","00FFFF","007FFF","0000FF","7F00FF","FF00FF","FF0080","CC0000","CC6600","CCCC00","66CC00","00CC00","00CC66","00CCCC","0066CC","0000CC","6600CC","CC00CC","CC0066","990000","994C00","999900","4D9900","009900","00994D","009999","004C99","000099","4C0099","990099","99004D","660000","663300","666600","336600","006600","006633","006666","003366","000066","330066","660066","660033","330000","331A00","333300","1A3300","003300","00331A","003333","001933","000033","190033","330033","33001A"],ColorDialog.prototype.createApplyFunction=function(){return mxUtils.bind(this,function(e){var t=this.editorUi.editor.graph;t.getModel().beginUpdate();try{t.setCellStyles(this.currentColorKey,e),this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",[this.currentColorKey],"values",[e],"cells",t.getSelectionCells()))}finally{t.getModel().endUpdate()}})},ColorDialog.recentColors=[],ColorDialog.addRecentColor=function(e,t){null!=e&&(mxUtils.remove(e,ColorDialog.recentColors),ColorDialog.recentColors.splice(0,0,e),ColorDialog.recentColors.length>=t&&ColorDialog.recentColors.pop())},ColorDialog.resetRecentColors=function(){ColorDialog.recentColors=[]};var AboutDialog=function(e){var t=document.createElement("div");t.setAttribute("align","center");var l=document.createElement("h3");mxUtils.write(l,mxResources.get("about")+" GraphEditor"),t.appendChild(l);var n=document.createElement("img");n.style.border="0px",n.setAttribute("width","176"),n.setAttribute("width","151"),n.setAttribute("src",IMAGE_PATH+"/logo.png"),t.appendChild(n),mxUtils.br(t),mxUtils.write(t,"Powered by mxGraph "+mxClient.VERSION),mxUtils.br(t);var i=document.createElement("a");i.setAttribute("href","http://www.jgraph.com/"),i.setAttribute("target","_blank"),mxUtils.write(i,"www.jgraph.com"),t.appendChild(i),mxUtils.br(t),mxUtils.br(t);var a=mxUtils.button(mxResources.get("close"),function(){e.hideDialog()});a.className="geBtn gePrimaryBtn",t.appendChild(a),this.container=t},FilenameDialog=function(e,t,l,n,i,a,o,r,d,s,c,u){var p,m;d=null==d||d;var g=document.createElement("table"),h=document.createElement("tbody");g.style.marginTop="8px",p=document.createElement("tr"),(m=document.createElement("td")).style.whiteSpace="nowrap",m.style.fontSize="10pt",m.style.width="120px",mxUtils.write(m,(i||mxResources.get("filename"))+":"),p.appendChild(m);var x=document.createElement("input");x.setAttribute("value",t||""),x.style.marginLeft="4px",x.style.width=null!=u?u+"px":"180px";var v=mxUtils.button(l,function(){(null==a||a(x.value))&&(d&&e.hideDialog(),n(x.value))});v.className="geBtn gePrimaryBtn",this.init=function(){if((null!=i||null==o)&&(x.focus(),mxClient.IS_GC||mxClient.IS_FF||document.documentMode>=5||mxClient.IS_QUIRKS?x.select():document.execCommand("selectAll",!1,null),Graph.fileSupport)){var t=g.parentNode;if(null!=t){e.editor.graph;var l=null;mxEvent.addListener(t,"dragleave",function(e){null!=l&&(l.style.backgroundColor="",l=null),e.stopPropagation(),e.preventDefault()}),mxEvent.addListener(t,"dragover",mxUtils.bind(this,function(e){null==l&&(!mxClient.IS_IE||document.documentMode>10)&&((l=x).style.backgroundColor="#ebf2f9"),e.stopPropagation(),e.preventDefault()})),mxEvent.addListener(t,"drop",mxUtils.bind(this,function(e){null!=l&&(l.style.backgroundColor="",l=null),mxUtils.indexOf(e.dataTransfer.types,"text/uri-list")>=0&&(x.value=decodeURIComponent(e.dataTransfer.getData("text/uri-list")),v.click()),e.stopPropagation(),e.preventDefault()}))}}},(m=document.createElement("td")).style.whiteSpace="nowrap",m.appendChild(x),p.appendChild(m),null==i&&null!=o||(h.appendChild(p),null!=c&&m.appendChild(FilenameDialog.createTypeHint(e,x,c))),null!=o&&(p=document.createElement("tr"),(m=document.createElement("td")).colSpan=2,m.appendChild(o),p.appendChild(m),h.appendChild(p)),p=document.createElement("tr"),(m=document.createElement("td")).colSpan=2,m.style.paddingTop="20px",m.style.whiteSpace="nowrap",m.setAttribute("align","right");var C=mxUtils.button(mxResources.get("cancel"),function(){e.hideDialog(),null!=s&&s()});if(C.className="geBtn",e.editor.cancelFirst&&m.appendChild(C),null!=r){var b=mxUtils.button(mxResources.get("help"),function(){e.editor.graph.openLink(r)});b.className="geBtn",m.appendChild(b)}mxEvent.addListener(x,"keypress",function(e){13==e.keyCode&&v.click()}),m.appendChild(v),e.editor.cancelFirst||m.appendChild(C),p.appendChild(m),h.appendChild(p),g.appendChild(h),this.container=g};FilenameDialog.filenameHelpLink=null,FilenameDialog.createTypeHint=function(e,t,l){var n=document.createElement("img");n.style.cssText="vertical-align:top;height:16px;width:16px;margin-left:4px;background-repeat:no-repeat;background-position:center bottom;cursor:pointer;",mxUtils.setOpacity(n,70);var i=function(){n.setAttribute("src",Editor.helpImage),n.setAttribute("title",mxResources.get("help"));for(var e=0;e<l.length;e++)if(l[e].ext.length>0&&t.value.substring(t.value.length-l[e].ext.length-1)=="."+l[e].ext){n.setAttribute("src",mxClient.imageBasePath+"/warning.png"),n.setAttribute("title",mxResources.get(l[e].title));break}};return mxEvent.addListener(t,"keyup",i),mxEvent.addListener(t,"change",i),mxEvent.addListener(n,"click",function(t){var l=n.getAttribute("title");n.getAttribute("src")==Editor.helpImage?e.editor.graph.openLink(FilenameDialog.filenameHelpLink):""!=l&&e.showError(null,l,mxResources.get("help"),function(){e.editor.graph.openLink(FilenameDialog.filenameHelpLink)},null,mxResources.get("ok"),null,null,null,340,90),mxEvent.consume(t)}),i(),n};var TextareaDialog=function(e,t,l,n,i,a,o,r,d,s,c,u,p){var m,g;o=null!=o?o:300,r=null!=r?r:120,s=null!=s&&s;var h=document.createElement("table"),x=document.createElement("tbody");m=document.createElement("tr"),(g=document.createElement("td")).style.fontSize="10pt",g.style.width="100px",mxUtils.write(g,t),m.appendChild(g),x.appendChild(m),m=document.createElement("tr"),g=document.createElement("td");var v=document.createElement("textarea");if(c&&v.setAttribute("wrap","off"),v.setAttribute("spellcheck","false"),v.setAttribute("autocorrect","off"),v.setAttribute("autocomplete","off"),v.setAttribute("autocapitalize","off"),mxUtils.write(v,l||""),v.style.resize="none",v.style.width=o+"px",v.style.height=r+"px",this.textarea=v,this.init=function(){v.focus(),v.scrollTop=0},g.appendChild(v),m.appendChild(g),x.appendChild(m),m=document.createElement("tr"),(g=document.createElement("td")).style.paddingTop="14px",g.style.whiteSpace="nowrap",g.setAttribute("align","right"),null!=p){var C=mxUtils.button(mxResources.get("help"),function(){e.editor.graph.openLink(p)});C.className="geBtn",g.appendChild(C)}var b=mxUtils.button(a||mxResources.get("cancel"),function(){e.hideDialog(),null!=i&&i()});if(b.className="geBtn",e.editor.cancelFirst&&g.appendChild(b),null!=d&&d(g,v),null!=n){var y=mxUtils.button(u||mxResources.get("apply"),function(){s||e.hideDialog(),n(v.value)});y.className="geBtn gePrimaryBtn",g.appendChild(y)}e.editor.cancelFirst||g.appendChild(b),m.appendChild(g),x.appendChild(m),h.appendChild(x),this.container=h},EditDiagramDialog=function(e){var t=document.createElement("div"),l=document.createElement("textarea");if(l.setAttribute("wrap","off"),l.setAttribute("spellcheck","false"),l.setAttribute("autocorrect","off"),l.setAttribute("autocomplete","off"),l.setAttribute("autocapitalize","off"),l.setAttribute("readonly",!0),l.style.overflow="auto",l.style.resize="none",l.style.width="600px",l.style.height="360px",l.style.marginBottom="16px",l.value=mxUtils.getPrettyXml(e.editor.getGraphXml()),t.appendChild(l),this.init=function(){},Graph.fileSupport){l.addEventListener("dragover",function(e){e.stopPropagation(),e.preventDefault()},!1),l.addEventListener("drop",function(t){if(t.stopPropagation(),t.preventDefault(),t.dataTransfer.files.length>0){var n=t.dataTransfer.files[0],i=new FileReader;i.onload=function(e){l.value=e.target.result},i.readAsText(n)}else l.value=e.extractGraphModelFromEvent(t)},!1)}var n=mxUtils.button(mxResources.get("cancel"),function(){e.hideDialog()});n.className="geBtn gePrimaryBtn",e.editor.cancelFirst&&t.appendChild(n),e.editor.cancelFirst||t.appendChild(n),t.className+=" diagram-dialog",this.container=t};EditDiagramDialog.showNewWindowOption=!0;var ExportDialog=function(e){var t,l,n=e.editor.graph,i=n.getGraphBounds(),a=n.view.scale,o=Math.ceil(i.width/a),r=Math.ceil(i.height/a),d=document.createElement("table"),s=document.createElement("tbody");d.setAttribute("cellpadding",mxClient.IS_SF?"0":"2"),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",l.style.width="100px",mxUtils.write(l,mxResources.get("filename")+":"),t.appendChild(l);var c=document.createElement("input");c.setAttribute("value",e.editor.getOrCreateFilename()),c.style.width="180px",(l=document.createElement("td")).appendChild(c),t.appendChild(l),s.appendChild(t),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",mxUtils.write(l,mxResources.get("format")+":"),t.appendChild(l);var u=document.createElement("select");u.style.width="180px";var p=document.createElement("option");p.setAttribute("value","png"),mxUtils.write(p,mxResources.get("formatPng")),u.appendChild(p);var m=document.createElement("option");ExportDialog.showGifOption&&(m.setAttribute("value","gif"),mxUtils.write(m,mxResources.get("formatGif")),u.appendChild(m));var g=document.createElement("option");g.setAttribute("value","jpg"),mxUtils.write(g,mxResources.get("formatJpg")),u.appendChild(g);var h=document.createElement("option");h.setAttribute("value","pdf"),mxUtils.write(h,mxResources.get("formatPdf")),u.appendChild(h);var x=document.createElement("option");if(x.setAttribute("value","svg"),mxUtils.write(x,mxResources.get("formatSvg")),u.appendChild(x),ExportDialog.showXmlOption){var v=document.createElement("option");v.setAttribute("value","xml"),mxUtils.write(v,mxResources.get("formatXml")),u.appendChild(v)}(l=document.createElement("td")).appendChild(u),t.appendChild(l),s.appendChild(t),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",mxUtils.write(l,mxResources.get("zoom")+" (%):"),t.appendChild(l);var C=document.createElement("input");C.setAttribute("type","number"),C.setAttribute("value","100"),C.style.width="180px",(l=document.createElement("td")).appendChild(C),t.appendChild(l),s.appendChild(t),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",mxUtils.write(l,mxResources.get("width")+":"),t.appendChild(l);var b=document.createElement("input");b.setAttribute("value",o),b.style.width="180px",(l=document.createElement("td")).appendChild(b),t.appendChild(l),s.appendChild(t),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",mxUtils.write(l,mxResources.get("height")+":"),t.appendChild(l);var y=document.createElement("input");y.setAttribute("value",r),y.style.width="180px",(l=document.createElement("td")).appendChild(y),t.appendChild(l),s.appendChild(t),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",mxUtils.write(l,mxResources.get("dpi")+":"),t.appendChild(l);var f=document.createElement("select");f.style.width="180px";var E=document.createElement("option");E.setAttribute("value","100"),mxUtils.write(E,"100dpi"),f.appendChild(E);var w=document.createElement("option");w.setAttribute("value","200"),mxUtils.write(w,"200dpi"),f.appendChild(w);var F=document.createElement("option");F.setAttribute("value","300"),mxUtils.write(F,"300dpi"),f.appendChild(F);var A=document.createElement("option");A.setAttribute("value","400"),mxUtils.write(A,"400dpi"),f.appendChild(A);var k=document.createElement("option");k.setAttribute("value","custom"),mxUtils.write(k,mxResources.get("custom")),f.appendChild(k);var D=document.createElement("input");D.style.width="180px",D.style.display="none",D.setAttribute("value","100"),D.setAttribute("type","number"),D.setAttribute("min","50"),D.setAttribute("step","50");var S=!1;mxEvent.addListener(f,"change",function(){"custom"==this.value?(this.style.display="none",D.style.display="",D.focus()):(D.value=this.value,S||(C.value=this.value))}),mxEvent.addListener(D,"change",function(){var e=parseInt(D.value);isNaN(e)||e<=0?D.style.backgroundColor="red":(D.style.backgroundColor="",S||(C.value=e))}),(l=document.createElement("td")).appendChild(f),l.appendChild(D),t.appendChild(l),s.appendChild(t),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",mxUtils.write(l,mxResources.get("background")+":"),t.appendChild(l);var U=document.createElement("input");U.setAttribute("type","checkbox"),U.checked=null==n.background||n.background==mxConstants.NONE,(l=document.createElement("td")).appendChild(U),mxUtils.write(l,mxResources.get("transparent")),t.appendChild(l),s.appendChild(t),t=document.createElement("tr"),(l=document.createElement("td")).style.fontSize="10pt",mxUtils.write(l,mxResources.get("borderWidth")+":"),t.appendChild(l);var R=document.createElement("input");function L(){var e=c.value,t=e.lastIndexOf(".");c.value=t>0?e.substring(0,t+1)+u.value:e+"."+u.value,"xml"===u.value?(C.setAttribute("disabled","true"),b.setAttribute("disabled","true"),y.setAttribute("disabled","true"),R.setAttribute("disabled","true")):(C.removeAttribute("disabled"),b.removeAttribute("disabled"),y.removeAttribute("disabled"),R.removeAttribute("disabled")),"png"===u.value||"svg"===u.value?U.removeAttribute("disabled"):U.setAttribute("disabled","disabled"),"png"===u.value?(f.removeAttribute("disabled"),D.removeAttribute("disabled")):(f.setAttribute("disabled","disabled"),D.setAttribute("disabled","disabled"))}function I(){b.value*y.value>MAX_AREA||b.value<=0?b.style.backgroundColor="red":b.style.backgroundColor="",b.value*y.value>MAX_AREA||y.value<=0?y.style.backgroundColor="red":y.style.backgroundColor=""}R.setAttribute("type","number"),R.setAttribute("value",ExportDialog.lastBorderValue),R.style.width="180px",(l=document.createElement("td")).appendChild(R),t.appendChild(l),s.appendChild(t),d.appendChild(s),mxEvent.addListener(u,"change",L),L(),mxEvent.addListener(C,"change",function(){S=!0;var e=Math.max(0,parseFloat(C.value)||100)/100;C.value=parseFloat((100*e).toFixed(2)),o>0?(b.value=Math.floor(o*e),y.value=Math.floor(r*e)):(C.value="100",b.value=o,y.value=r),I()}),mxEvent.addListener(b,"change",function(){var e=parseInt(b.value)/o;e>0?(C.value=parseFloat((100*e).toFixed(2)),y.value=Math.floor(r*e)):(C.value="100",b.value=o,y.value=r),I()}),mxEvent.addListener(y,"change",function(){var e=parseInt(y.value)/r;e>0?(C.value=parseFloat((100*e).toFixed(2)),b.value=Math.floor(o*e)):(C.value="100",b.value=o,y.value=r),I()}),t=document.createElement("tr"),(l=document.createElement("td")).setAttribute("align","right"),l.style.paddingTop="22px",l.colSpan=2;var M=mxUtils.button(mxResources.get("export"),mxUtils.bind(this,function(){if(parseInt(C.value)<=0)mxUtils.alert(mxResources.get("drawingEmpty"));else{var t=c.value,l=u.value,i=Math.max(0,parseFloat(C.value)||100)/100,a=Math.max(0,parseInt(R.value)),o=n.background,r=Math.max(1,parseInt(D.value));"svg"!=l&&"png"!=l||!U.checked?null!=o&&o!=mxConstants.NONE||(o="#ffffff"):o=null,ExportDialog.lastBorderValue=a,ExportDialog.exportFile(e,t,l,o,i,a,r)}}));M.className="geBtn gePrimaryBtn";var B=mxUtils.button(mxResources.get("cancel"),function(){e.hideDialog()});B.className="geBtn",e.editor.cancelFirst?(l.appendChild(B),l.appendChild(M)):(l.appendChild(M),l.appendChild(B)),t.appendChild(l),s.appendChild(t),d.appendChild(s),this.container=d};ExportDialog.lastBorderValue=0,ExportDialog.showGifOption=!0,ExportDialog.showXmlOption=!0,ExportDialog.exportFile=function(e,t,l,n,i,a,o){var r=e.editor.graph;if("xml"==l)ExportDialog.saveLocalFile(e,mxUtils.getXml(e.editor.getGraphXml()),t,l);else if("svg"==l)ExportDialog.saveLocalFile(e,mxUtils.getXml(r.getSvg(n,i,a)),t,l);else{var d=r.getGraphBounds(),s=mxUtils.createXmlDocument(),c=s.createElement("output");s.appendChild(c);var u=new mxXmlCanvas2D(c);u.translate(Math.floor((a/i-d.x)/r.view.scale),Math.floor((a/i-d.y)/r.view.scale)),u.scale(i/r.view.scale),(new mxImageExport).drawState(r.getView().getState(r.model.root),u);var p="xml="+encodeURIComponent(mxUtils.getXml(c)),m=Math.ceil(d.width*i/r.view.scale+2*a),g=Math.ceil(d.height*i/r.view.scale+2*a);if(p.length<=MAX_REQUEST_SIZE&&m*g<MAX_AREA)e.hideDialog(),new mxXmlRequest(EXPORT_URL,"format="+l+"&filename="+encodeURIComponent(t)+"&bg="+(null!=n?n:"none")+"&w="+m+"&h="+g+"&"+p+"&dpi="+o).simulate(document,"_blank");else mxUtils.alert(mxResources.get("drawingTooLarge"))}},ExportDialog.saveLocalFile=function(e,t,l,n){t.length<MAX_REQUEST_SIZE?(e.hideDialog(),new mxXmlRequest(SAVE_URL,"xml="+encodeURIComponent(t)+"&filename="+encodeURIComponent(l)+"&format="+n).simulate(document,"_blank")):(mxUtils.alert(mxResources.get("drawingTooLarge")),mxUtils.popup(xml))};var EditDataDialog=function(e,t){var l=document.createElement("div"),n=e.editor.graph,i=n.getModel().getValue(t);if(!mxUtils.isNode(i)){var a=mxUtils.createXmlDocument().createElement("object");a.setAttribute("label",i||""),i=a}var o=new mxForm("properties");o.table.style.width="100%";for(var r=i.attributes,d=[],s=[],c=0,u=null!=EditDataDialog.getDisplayIdForCell?EditDataDialog.getDisplayIdForCell(e,t):null,p=function(e,t){var l=document.createElement("div");l.style.position="relative",l.style.paddingRight="20px",l.style.boxSizing="border-box",l.style.width="100%";var n=document.createElement("a"),i=mxUtils.createImage(Dialog.prototype.closeImage);i.style.height="9px",i.style.fontSize="9px",i.style.marginBottom=mxClient.IS_IE11?"-1px":"5px",n.className="geButton",n.setAttribute("title",mxResources.get("delete")),n.style.position="absolute",n.style.top="4px",n.style.right="0px",n.style.margin="0px",n.style.width="9px",n.style.height="9px",n.style.cursor="pointer",n.appendChild(i);var a=function(e){return function(){for(var t=0,l=0;l<d.length;l++){if(d[l]==e){s[l]=null,o.table.deleteRow(t+(null!=u?1:0));break}null!=s[l]&&t++}}}(t);mxEvent.addListener(n,"click",a);var r=e.parentNode;l.appendChild(e),l.appendChild(n),r.appendChild(l)},m=function(e,t,l){d[e]=t,s[e]=o.addTextarea(d[c]+":",l,2),s[e].style.width="100%",p(s[e],t)},g=[],h=n.getModel().getParent(t)==n.getModel().getRoot(),x=0;x<r.length;x++)!h&&"label"==r[x].nodeName||"placeholders"==r[x].nodeName||g.push({name:r[x].nodeName,value:r[x].nodeValue});if(g.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),null!=u){var v=document.createElement("div");v.style.width="100%",v.style.fontSize="11px",v.style.textAlign="center",mxUtils.write(v,u),o.addField(mxResources.get("id")+":",v)}for(x=0;x<g.length;x++)m(c,g[x].name,g[x].value),c++;var C=document.createElement("div");C.style.cssText="position:absolute;left:30px;right:30px;overflow-y:auto;top:30px;bottom:80px;",C.appendChild(o.table);var b=document.createElement("div");b.style.boxSizing="border-box",b.style.paddingRight="160px",b.style.whiteSpace="nowrap",b.style.marginTop="6px",b.style.width="100%";var y=document.createElement("input");y.setAttribute("placeholder",mxResources.get("enterPropertyName")),y.setAttribute("type","text"),y.setAttribute("size",mxClient.IS_IE||mxClient.IS_IE11?"36":"40"),y.style.boxSizing="border-box",y.style.marginLeft="2px",y.style.width="100%",b.appendChild(y),C.appendChild(b),l.appendChild(C);var f=mxUtils.button(mxResources.get("addProperty"),function(){var e=y.value;if(e.length>0&&"label"!=e&&"placeholders"!=e&&e.indexOf(":")<0)try{var t=mxUtils.indexOf(d,e);if(t>=0&&null!=s[t])s[t].focus();else{i.cloneNode(!1).setAttribute(e,""),t>=0&&(d.splice(t,1),s.splice(t,1)),d.push(e);var l=o.addTextarea(e+":","",2);l.style.width="100%",s.push(l),p(l,e),l.focus()}f.setAttribute("disabled","disabled"),y.value=""}catch(e){mxUtils.alert(e)}else mxUtils.alert(mxResources.get("invalidName"))});this.init=function(){s.length>0?s[0].focus():y.focus()},f.setAttribute("title",mxResources.get("addProperty")),f.setAttribute("disabled","disabled"),f.style.textOverflow="ellipsis",f.style.position="absolute",f.style.overflow="hidden",f.style.width="144px",f.style.right="0px",f.className="geBtn",b.appendChild(f);var E=mxUtils.button(mxResources.get("cancel"),function(){e.hideDialog.apply(e,arguments)});E.className="geBtn";var w=mxUtils.button(mxResources.get("apply"),function(){try{e.hideDialog.apply(e,arguments),i=i.cloneNode(!0);for(var l=!1,a=0;a<d.length;a++)null==s[a]?i.removeAttribute(d[a]):(i.setAttribute(d[a],s[a].value),l=l||"placeholder"==d[a]&&"1"==i.getAttribute("placeholders"));l&&i.removeAttribute("label"),n.getModel().setValue(t,i)}catch(e){mxUtils.alert(e)}});function F(){y.value.length>0?f.removeAttribute("disabled"):f.setAttribute("disabled","disabled")}w.className="geBtn gePrimaryBtn",mxEvent.addListener(y,"keyup",F),mxEvent.addListener(y,"change",F);var A=document.createElement("div");if(A.style.cssText="position:absolute;left:30px;right:30px;text-align:right;bottom:30px;height:40px;",e.editor.graph.getModel().isVertex(t)||e.editor.graph.getModel().isEdge(t)){var k=document.createElement("span");k.style.marginRight="10px";var D=document.createElement("input");if(D.setAttribute("type","checkbox"),D.style.marginRight="6px","1"==i.getAttribute("placeholders")&&(D.setAttribute("checked","checked"),D.defaultChecked=!0),mxEvent.addListener(D,"click",function(){"1"==i.getAttribute("placeholders")?i.removeAttribute("placeholders"):i.setAttribute("placeholders","1")}),k.appendChild(D),mxUtils.write(k,mxResources.get("placeholders")),null!=EditDataDialog.placeholderHelpLink){var S=document.createElement("a");S.setAttribute("href",EditDataDialog.placeholderHelpLink),S.setAttribute("title",mxResources.get("help")),S.setAttribute("target","_blank"),S.style.marginLeft="8px",S.style.cursor="help";var U=document.createElement("img");mxUtils.setOpacity(U,50),U.style.height="16px",U.style.width="16px",U.setAttribute("border","0"),U.setAttribute("valign","middle"),U.style.marginTop=mxClient.IS_IE11?"0px":"-4px",U.setAttribute("src",Editor.helpImage),S.appendChild(U),k.appendChild(S)}A.appendChild(k)}e.editor.cancelFirst?(A.appendChild(E),A.appendChild(w)):(A.appendChild(w),A.appendChild(E)),l.appendChild(A),this.container=l};EditDataDialog.getDisplayIdForCell=function(e,t){var l=null;return null!=e.editor.graph.getModel().getParent(t)&&(l=t.getId()),l},EditDataDialog.placeholderHelpLink=null;var LinkDialog=function(e,t,l,n){var i=document.createElement("div");mxUtils.write(i,mxResources.get("editLink")+":");var a=document.createElement("div");a.className="geTitle",a.style.backgroundColor="transparent",a.style.borderColor="transparent",a.style.whiteSpace="nowrap",a.style.textOverflow="clip",a.style.cursor="default",mxClient.IS_VML||(a.style.paddingRight="20px");var o=document.createElement("input");o.setAttribute("value",t),o.setAttribute("placeholder","http://www.example.com/"),o.setAttribute("type","text"),o.style.marginTop="6px",o.style.width="400px",o.style.backgroundImage="url('"+Dialog.prototype.clearImage+"')",o.style.backgroundRepeat="no-repeat",o.style.backgroundPosition="100% 50%",o.style.paddingRight="14px";var r=document.createElement("div");r.setAttribute("title",mxResources.get("reset")),r.style.position="relative",r.style.left="-16px",r.style.width="12px",r.style.height="14px",r.style.cursor="pointer",r.style.display=mxClient.IS_VML?"inline":"inline-block",r.style.top=(mxClient.IS_VML?0:3)+"px",r.style.background="url("+IMAGE_PATH+"/transparent.gif)",mxEvent.addListener(r,"click",function(){o.value="",o.focus()}),a.appendChild(o),a.appendChild(r),i.appendChild(a),this.init=function(){o.focus(),mxClient.IS_GC||mxClient.IS_FF||document.documentMode>=5||mxClient.IS_QUIRKS?o.select():document.execCommand("selectAll",!1,null)};var d=document.createElement("div");d.style.marginTop="18px",d.style.textAlign="right",mxEvent.addListener(o,"keypress",function(t){13==t.keyCode&&(e.hideDialog(),n(o.value))});var s=mxUtils.button(mxResources.get("cancel"),function(){e.hideDialog()});s.className="geBtn",e.editor.cancelFirst&&d.appendChild(s);var c=mxUtils.button(l,function(){e.hideDialog(),n(o.value)});c.className="geBtn gePrimaryBtn",d.appendChild(c),e.editor.cancelFirst||d.appendChild(s),i.appendChild(d),this.container=i},OutlineWindow=function(e,t,l,n,i){var a=e.editor.graph,o=document.createElement("div");o.style.position="absolute",o.style.width="100%",o.style.height="100%",o.style.border="1px solid whiteSmoke",o.style.overflow="hidden",this.window=new mxWindow(mxResources.get("outline"),o,t,l,n,i,!0,!0),this.window.minimumSize=new mxRectangle(0,0,80,80),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0),this.window.setLocation=function(e,t){var l=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,n=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;e=Math.max(0,Math.min(e,l-this.table.clientWidth)),t=Math.max(0,Math.min(t,n-this.table.clientHeight-48)),this.getX()==e&&this.getY()==t||mxWindow.prototype.setLocation.apply(this,arguments)};var r=mxUtils.bind(this,function(){var e=this.window.getX(),t=this.window.getY();this.window.setLocation(e,t)});mxEvent.addListener(window,"resize",r);var d=e.createOutline(this.window);this.destroy=function(){mxEvent.removeListener(window,"resize",r),this.window.destroy(),d.destroy()},this.window.addListener(mxEvent.RESIZE,mxUtils.bind(this,function(){d.update(!1),d.outline.sizeDidChange()})),this.window.addListener(mxEvent.SHOW,mxUtils.bind(this,function(){this.window.fit(),d.suspended=!1,d.outline.refresh(),d.update()})),this.window.addListener(mxEvent.HIDE,mxUtils.bind(this,function(){d.suspended=!0})),this.window.addListener(mxEvent.NORMALIZE,mxUtils.bind(this,function(){d.suspended=!1,d.update()})),this.window.addListener(mxEvent.MINIMIZE,mxUtils.bind(this,function(){d.suspended=!0}));var s=d.createGraph;function c(){d.outline.pageScale=a.pageScale,d.outline.pageFormat=a.pageFormat,d.outline.pageVisible=a.pageVisible,d.outline.background=null==a.background||a.background==mxConstants.NONE?a.defaultPageBackgroundColor:a.background;var e=mxUtils.getCurrentStyle(a.container);o.style.backgroundColor=e.backgroundColor,null!=a.view.backgroundPageShape&&null!=d.outline.view.backgroundPageShape&&(d.outline.view.backgroundPageShape.fill=a.view.backgroundPageShape.fill),d.outline.refresh()}if(d.createGraph=function(e){var t=s.apply(this,arguments);t.gridEnabled=!1,t.pageScale=a.pageScale,t.pageFormat=a.pageFormat,t.background=null==a.background||a.background==mxConstants.NONE?a.defaultPageBackgroundColor:a.background,t.pageVisible=a.pageVisible;var l=mxUtils.getCurrentStyle(a.container);return o.style.backgroundColor=l.backgroundColor,t},d.init(o),e.editor.addListener("resetGraphView",c),e.addListener("pageFormatChanged",c),e.addListener("backgroundColorChanged",c),e.addListener("backgroundImageChanged",c),e.addListener("pageViewChanged",function(){c(),d.update(!0)}),d.outline.dialect==mxConstants.DIALECT_SVG){var u=e.actions.get("zoomIn"),p=e.actions.get("zoomOut");mxEvent.addMouseWheelListener(function(e,t){for(var l=!1,n=mxEvent.getSource(e);null!=n;){if(n==d.outline.view.canvas.ownerSVGElement){l=!0;break}n=n.parentNode}l&&(t?u.funct():p.funct())})}},LayersWindow=function(e,t,l,n,i){var a=e.editor.graph,o=document.createElement("div");o.style.userSelect="none",o.style.background="white"==Dialog.backdropColor?"whiteSmoke":Dialog.backdropColor,o.style.border="1px solid whiteSmoke",o.style.height="100%",o.style.marginBottom="10px",o.style.overflow="auto";var r=EditorUi.compactUi?"26px":"30px",d=document.createElement("div");d.style.backgroundColor="white"==Dialog.backdropColor?"#dcdcdc":Dialog.backdropColor,d.style.position="absolute",d.style.overflow="auto",d.style.left="0px",d.style.right="0px",d.style.top="0px",d.style.bottom=parseInt(r)+7+"px",o.appendChild(d);var s=null,c=null;mxEvent.addListener(o,"dragover",function(e){e.dataTransfer.dropEffect="move",c=0,e.stopPropagation(),e.preventDefault()}),mxEvent.addListener(o,"drop",function(e){e.stopPropagation(),e.preventDefault()});var u=null,p=null,m=document.createElement("div");m.className="geToolbarContainer",m.style.position="absolute",m.style.bottom="0px",m.style.left="0px",m.style.right="0px",m.style.height=r,m.style.overflow="hidden",m.style.padding=EditorUi.compactUi?"4px 0px 3px 0px":"1px",m.style.backgroundColor="white"==Dialog.backdropColor?"whiteSmoke":Dialog.backdropColor,m.style.borderWidth="1px 0px 0px 0px",m.style.borderColor="#c3c3c3",m.style.borderStyle="solid",m.style.display="block",m.style.whiteSpace="nowrap",mxClient.IS_QUIRKS&&(m.style.filter="none");var g=document.createElement("a");g.className="geButton",mxClient.IS_QUIRKS&&(g.style.filter="none");var h=g.cloneNode();h.innerHTML='<div class="geSprite geSprite-delete" style="display:inline-block;"></div>',mxEvent.addListener(h,"click",function(e){if(a.isEnabled()){a.model.beginUpdate();try{var t=a.model.root.getIndex(p);a.removeCells([p],!1),0==a.model.getChildCount(a.model.root)?(a.model.add(a.model.root,new mxCell),a.setDefaultParent(null)):t>0&&t<=a.model.getChildCount(a.model.root)?a.setDefaultParent(a.model.getChildAt(a.model.root,t-1)):a.setDefaultParent(null)}finally{a.model.endUpdate()}}mxEvent.consume(e)}),a.isEnabled()||(h.className="geButton mxDisabled"),m.appendChild(h);var x=g.cloneNode();x.setAttribute("title",mxUtils.trim(mxResources.get("moveSelectionTo",[""]))),x.innerHTML='<div class="geSprite geSprite-insert" style="display:inline-block;"></div>',mxEvent.addListener(x,"click",function(t){if(a.isEnabled()&&!a.isSelectionEmpty()){e.editor.graph.popupMenuHandler.hideMenu();var l=new mxPopupMenu(mxUtils.bind(this,function(e,t){for(var l=u-1;l>=0;l--)mxUtils.bind(this,function(l){var n=e.addItem(a.convertValueToString(l)||mxResources.get("background"),null,mxUtils.bind(this,function(){a.moveCells(a.getSelectionCells(),0,0,!1,l)}),t);1==a.getSelectionCount()&&a.model.isAncestor(l,a.getSelectionCell())&&e.addCheckmark(n,Editor.checkmarkImage)})(a.model.getChildAt(a.model.root,l))}));l.div.className+=" geMenubarMenu",l.smartSeparators=!0,l.showDisabled=!0,l.autoExpand=!0,l.hideMenu=mxUtils.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(l,arguments),l.destroy()});var n=mxUtils.getOffset(x);l.popup(n.x,n.y+x.offsetHeight,null,t),e.setCurrentMenu(l)}}),m.appendChild(x);var v=g.cloneNode();v.innerHTML='<div class="geSprite geSprite-dots" style="display:inline-block;"></div>',v.setAttribute("title",mxResources.get("rename")),mxEvent.addListener(v,"click",function(t){a.isEnabled()&&e.showDataDialog(p),mxEvent.consume(t)}),a.isEnabled()||(v.className="geButton mxDisabled"),m.appendChild(v);var C=g.cloneNode();C.innerHTML='<div class="geSprite geSprite-duplicate" style="display:inline-block;"></div>',mxEvent.addListener(C,"click",function(e){if(a.isEnabled()){var t=null;a.model.beginUpdate();try{t=a.cloneCell(p),a.cellLabelChanged(t,mxResources.get("untitledLayer")),t.setVisible(!0),t=a.addCell(t,a.model.root),a.setDefaultParent(t)}finally{a.model.endUpdate()}null==t||a.isCellLocked(t)||a.selectAll(t)}}),a.isEnabled()||(C.className="geButton mxDisabled"),m.appendChild(C);var b=g.cloneNode();function y(){function t(t,l,n,i){var o=document.createElement("div");o.className="geToolbarContainer",o.style.overflow="hidden",o.style.position="relative",o.style.padding="4px",o.style.height="22px",o.style.display="block",o.style.backgroundColor="white"==Dialog.backdropColor?"whiteSmoke":Dialog.backdropColor,o.style.borderWidth="0px 0px 1px 0px",o.style.borderColor="#c3c3c3",o.style.borderStyle="solid",o.style.whiteSpace="nowrap",o.setAttribute("title",l);var r=document.createElement("div");r.style.display="inline-block",r.style.width="100%",r.style.textOverflow="ellipsis",r.style.overflow="hidden",mxEvent.addListener(o,"dragover",function(e){e.dataTransfer.dropEffect="move",c=t,e.stopPropagation(),e.preventDefault()}),mxEvent.addListener(o,"dragstart",function(e){s=o,mxClient.IS_FF&&e.dataTransfer.setData("Text","<layer/>")}),mxEvent.addListener(o,"dragend",function(e){null!=s&&null!=c&&a.addCell(n,a.model.root,c),s=null,c=null,e.stopPropagation(),e.preventDefault()});var m=document.createElement("img");m.setAttribute("draggable","false"),m.setAttribute("align","top"),m.setAttribute("border","0"),m.style.padding="4px",m.setAttribute("title",mxResources.get("lockUnlock"));var g=a.view.getState(n),h=null!=g?g.style:a.getCellStyle(n);"1"==mxUtils.getValue(h,"locked","0")?m.setAttribute("src",Dialog.prototype.lockedImage):m.setAttribute("src",Dialog.prototype.unlockedImage),a.isEnabled()&&(m.style.cursor="pointer"),mxEvent.addListener(m,"click",function(e){if(a.isEnabled()){var t=null;a.getModel().beginUpdate();try{t="1"==mxUtils.getValue(h,"locked","0")?null:"1",a.setCellStyles("locked",t,[n])}finally{a.getModel().endUpdate()}"1"==t&&a.removeSelectionCells(a.getModel().getDescendants(n)),mxEvent.consume(e)}}),r.appendChild(m);var x=document.createElement("input");if(x.setAttribute("type","checkbox"),x.setAttribute("title",mxResources.get("hideIt",[n.value||mxResources.get("background")])),x.style.marginLeft="4px",x.style.marginRight="6px",x.style.marginTop="4px",r.appendChild(x),a.model.isVisible(n)&&(x.setAttribute("checked","checked"),x.defaultChecked=!0),mxEvent.addListener(x,"click",function(e){a.model.setVisible(n,!a.model.isVisible(n)),mxEvent.consume(e)}),mxUtils.write(r,l),o.appendChild(r),a.isEnabled()){if(mxClient.IS_TOUCH||mxClient.IS_POINTER||mxClient.IS_VML||mxClient.IS_IE&&document.documentMode<10){var v=document.createElement("div");if(v.style.display="block",v.style.textAlign="right",v.style.whiteSpace="nowrap",v.style.position="absolute",v.style.right="6px",v.style.top="6px",t>0){var C=document.createElement("a");C.setAttribute("title",mxResources.get("toBack")),C.className="geButton",C.style.cssFloat="none",C.innerHTML="&#9660;",C.style.width="14px",C.style.height="14px",C.style.fontSize="14px",C.style.margin="0px",C.style.marginTop="-1px",v.appendChild(C),mxEvent.addListener(C,"click",function(e){a.isEnabled()&&a.addCell(n,a.model.root,t-1),mxEvent.consume(e)})}if(t>=0&&t<u-1){var b=document.createElement("a");b.setAttribute("title",mxResources.get("toFront")),b.className="geButton",b.style.cssFloat="none",b.innerHTML="&#9650;",b.style.width="14px",b.style.height="14px",b.style.fontSize="14px",b.style.margin="0px",b.style.marginTop="-1px",v.appendChild(b),mxEvent.addListener(b,"click",function(e){a.isEnabled()&&a.addCell(n,a.model.root,t+1),mxEvent.consume(e)})}o.appendChild(v)}mxClient.IS_SVG&&(!mxClient.IS_IE||document.documentMode>=10)&&(o.setAttribute("draggable","true"),o.style.cursor="move")}mxEvent.addListener(o,"dblclick",function(t){var l=mxEvent.getSource(t).nodeName;"INPUT"!=l&&"IMG"!=l&&(!function(t){if(a.isEnabled()&&null!=t){var l=a.convertValueToString(t),n=new FilenameDialog(e,l||mxResources.get("background"),mxResources.get("rename"),mxUtils.bind(this,function(e){null!=e&&a.cellLabelChanged(t,e)}),mxResources.get("enterName"));e.showDialog(n.container,300,100,!0,!0),n.init()}}(n),mxEvent.consume(t))}),a.getDefaultParent()==n?(o.style.background="white"==Dialog.backdropColor?"#e6eff8":"#505759",o.style.fontWeight=a.isEnabled()?"bold":"",p=n):mxEvent.addListener(o,"click",function(e){a.isEnabled()&&(a.setDefaultParent(i),a.view.setCurrentRoot(null),y())}),d.appendChild(o)}u=a.model.getChildCount(a.model.root),d.innerHTML="";for(var l=u-1;l>=0;l--)mxUtils.bind(this,function(e){t(l,a.convertValueToString(e)||mxResources.get("background"),e,e)})(a.model.getChildAt(a.model.root,l));var n=a.convertValueToString(p)||mxResources.get("background");h.setAttribute("title",mxResources.get("removeIt",[n])),C.setAttribute("title",mxResources.get("duplicateIt",[n])),v.setAttribute("title",mxResources.get("editData")),a.isSelectionEmpty()&&(x.className="geButton mxDisabled")}b.innerHTML='<div class="geSprite geSprite-plus" style="display:inline-block;"></div>',b.setAttribute("title",mxResources.get("addLayer")),mxEvent.addListener(b,"click",function(e){if(a.isEnabled()){a.model.beginUpdate();try{var t=a.addCell(new mxCell(mxResources.get("untitledLayer")),a.model.root);a.setDefaultParent(t)}finally{a.model.endUpdate()}}mxEvent.consume(e)}),a.isEnabled()||(b.className="geButton mxDisabled"),m.appendChild(b),o.appendChild(m),y(),a.model.addListener(mxEvent.CHANGE,function(){y()}),a.selectionModel.addListener(mxEvent.CHANGE,function(){a.isSelectionEmpty()?x.className="geButton mxDisabled":x.className="geButton"}),this.window=new mxWindow(mxResources.get("layers"),o,t,l,n,i,!0,!0),this.window.minimumSize=new mxRectangle(0,0,120,120),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0),this.window.addListener(mxEvent.SHOW,mxUtils.bind(this,function(){this.window.fit()})),this.refreshLayers=y,this.window.setLocation=function(e,t){var l=window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth,n=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;e=Math.max(0,Math.min(e,l-this.table.clientWidth)),t=Math.max(0,Math.min(t,n-this.table.clientHeight-48)),this.getX()==e&&this.getY()==t||mxWindow.prototype.setLocation.apply(this,arguments)};var f=mxUtils.bind(this,function(){var e=this.window.getX(),t=this.window.getY();this.window.setLocation(e,t)});mxEvent.addListener(window,"resize",f),this.destroy=function(){mxEvent.removeListener(window,"resize",f),this.window.destroy()}};