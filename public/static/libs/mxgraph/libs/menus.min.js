function Menubar(e,t){this.editorUi=e,this.container=t}function Menu(e,t){mxEventSource.call(this),this.funct=e,this.enabled=null==t||t}Menus=function(e){this.editorUi=e,this.menus=new Object,this.init(),mxClient.IS_SVG||((new Image).src=this.checkmarkImage)},Menus.prototype.defaultFont="Helvetica",Menus.prototype.defaultFontSize="12",Menus.prototype.defaultMenuItems=["file","edit","view","arrange","extras","help"],Menus.prototype.defaultFonts=["Helvetica","Verdana","Times New Roman","Garamond","Comic Sans MS","Courier New","Georgia","Lucida Console","Tahoma"],Menus.prototype.init=function(){var e=this.editorUi.editor.graph,t=mxUtils.bind(e,e.isEnabled);this.customFonts=[],this.customFontSizes=[],this.put("fontFamily",new Menu(mxUtils.bind(this,function(t,n){for(var i=mxUtils.bind(this,function(i){this.styleChange(t,i,[mxConstants.STYLE_FONTFAMILY],[i],null,n,function(){document.execCommand("fontname",!1,i)},function(){e.updateLabelElements(e.getSelectionCells(),function(t){t.removeAttribute("face"),t.style.fontFamily=null,"PRE"==t.nodeName&&e.replaceElement(t,"div")})}).firstChild.nextSibling.style.fontFamily=i}),l=0;l<this.defaultFonts.length;l++)i(this.defaultFonts[l]);if(t.addSeparator(n),this.customFonts.length>0){for(l=0;l<this.customFonts.length;l++)i(this.customFonts[l]);t.addSeparator(n),t.addItem(mxResources.get("reset"),null,mxUtils.bind(this,function(){this.customFonts=[],this.editorUi.fireEvent(new mxEventObject("customFontsChanged"))}),n),t.addSeparator(n)}this.promptChange(t,mxResources.get("custom")+"...","",mxConstants.DEFAULT_FONTFAMILY,mxConstants.STYLE_FONTFAMILY,n,!0,mxUtils.bind(this,function(e){mxUtils.indexOf(this.customFonts,e)<0&&(this.customFonts.push(e),this.editorUi.fireEvent(new mxEventObject("customFontsChanged")))}))}))),this.put("formatBlock",new Menu(mxUtils.bind(this,function(t,n){function i(i,l){return t.addItem(i,null,mxUtils.bind(this,function(){null!=e.cellEditor.textarea&&(e.cellEditor.textarea.focus(),document.execCommand("formatBlock",!1,"<"+l+">"))}),n)}i(mxResources.get("normal"),"p"),i("","h1").firstChild.nextSibling.innerHTML='<h1 style="margin:0px;">'+mxResources.get("heading")+" 1</h1>",i("","h2").firstChild.nextSibling.innerHTML='<h2 style="margin:0px;">'+mxResources.get("heading")+" 2</h2>",i("","h3").firstChild.nextSibling.innerHTML='<h3 style="margin:0px;">'+mxResources.get("heading")+" 3</h3>",i("","h4").firstChild.nextSibling.innerHTML='<h4 style="margin:0px;">'+mxResources.get("heading")+" 4</h4>",i("","h5").firstChild.nextSibling.innerHTML='<h5 style="margin:0px;">'+mxResources.get("heading")+" 5</h5>",i("","h6").firstChild.nextSibling.innerHTML='<h6 style="margin:0px;">'+mxResources.get("heading")+" 6</h6>",i("","pre").firstChild.nextSibling.innerHTML='<pre style="margin:0px;">'+mxResources.get("formatted")+"</pre>",i("","blockquote").firstChild.nextSibling.innerHTML='<blockquote style="margin-top:0px;margin-bottom:0px;">'+mxResources.get("blockquote")+"</blockquote>"}))),this.put("fontSize",new Menu(mxUtils.bind(this,function(t,n){for(var i=[6,8,9,10,11,12,14,18,24,36,48,72],l=mxUtils.bind(this,function(i){this.styleChange(t,i,[mxConstants.STYLE_FONTSIZE],[i],null,n,function(){if(null!=e.cellEditor.textarea){document.execCommand("fontSize",!1,"3");for(var t=e.cellEditor.textarea.getElementsByTagName("font"),n=0;n<t.length;n++)if("3"==t[n].getAttribute("size")){t[n].removeAttribute("size"),t[n].style.fontSize=i+"px";break}}})}),o=0;o<i.length;o++)l(i[o]);if(t.addSeparator(n),this.customFontSizes.length>0){for(o=0;o<this.customFontSizes.length;o++)l(this.customFontSizes[o]);t.addSeparator(n),t.addItem(mxResources.get("reset"),null,mxUtils.bind(this,function(){this.customFontSizes=[]}),n),t.addSeparator(n)}this.promptChange(t,mxResources.get("custom")+"...","(pt)","12",mxConstants.STYLE_FONTSIZE,n,!0,mxUtils.bind(this,function(e){this.customFontSizes.push(e)}))}))),this.put("direction",new Menu(mxUtils.bind(this,function(t,n){t.addItem(mxResources.get("flipH"),null,function(){e.toggleCellStyles(mxConstants.STYLE_FLIPH,!1)},n),t.addItem(mxResources.get("flipV"),null,function(){e.toggleCellStyles(mxConstants.STYLE_FLIPV,!1)},n),this.addMenuItems(t,["-","rotation"],n)}))),this.put("align",new Menu(mxUtils.bind(this,function(t,n){t.addItem(mxResources.get("leftAlign"),null,function(){e.alignCells(mxConstants.ALIGN_LEFT)},n),t.addItem(mxResources.get("center"),null,function(){e.alignCells(mxConstants.ALIGN_CENTER)},n),t.addItem(mxResources.get("rightAlign"),null,function(){e.alignCells(mxConstants.ALIGN_RIGHT)},n),t.addSeparator(n),t.addItem(mxResources.get("topAlign"),null,function(){e.alignCells(mxConstants.ALIGN_TOP)},n),t.addItem(mxResources.get("middle"),null,function(){e.alignCells(mxConstants.ALIGN_MIDDLE)},n),t.addItem(mxResources.get("bottomAlign"),null,function(){e.alignCells(mxConstants.ALIGN_BOTTOM)},n)}))),this.put("distribute",new Menu(mxUtils.bind(this,function(t,n){t.addItem(mxResources.get("horizontal"),null,function(){e.distributeCells(!0)},n),t.addItem(mxResources.get("vertical"),null,function(){e.distributeCells(!1)},n)}))),this.put("layout",new Menu(mxUtils.bind(this,function(t,n){var i=mxUtils.bind(this,function(e,t){var n=new FilenameDialog(this.editorUi,e,mxResources.get("apply"),function(e){t(parseFloat(e))},mxResources.get("spacing"));this.editorUi.showDialog(n.container,300,80,!0,!0),n.init()});t.addItem(mxResources.get("horizontalFlow"),null,mxUtils.bind(this,function(){var t=new mxHierarchicalLayout(e,mxConstants.DIRECTION_WEST);this.editorUi.executeLayout(function(){var n=e.getSelectionCells();t.execute(e.getDefaultParent(),0==n.length?null:n)},!0)}),n),t.addItem(mxResources.get("verticalFlow"),null,mxUtils.bind(this,function(){var t=new mxHierarchicalLayout(e,mxConstants.DIRECTION_NORTH);this.editorUi.executeLayout(function(){var n=e.getSelectionCells();t.execute(e.getDefaultParent(),0==n.length?null:n)},!0)}),n),t.addSeparator(n),t.addItem(mxResources.get("horizontalTree"),null,mxUtils.bind(this,function(){var t=e.getSelectionCell(),n=null;if(null==t||0==e.getModel().getChildCount(t)?0==e.getModel().getEdgeCount(t)&&(n=e.findTreeRoots(e.getDefaultParent())):n=e.findTreeRoots(t),null!=n&&n.length>0&&(t=n[0]),null!=t){var l=new mxCompactTreeLayout(e,!0);l.edgeRouting=!1,l.levelDistance=30,i(l.levelDistance,mxUtils.bind(this,function(n){l.levelDistance=n,this.editorUi.executeLayout(function(){l.execute(e.getDefaultParent(),t)},!0)}))}}),n),t.addItem(mxResources.get("verticalTree"),null,mxUtils.bind(this,function(){var t=e.getSelectionCell(),n=null;if(null==t||0==e.getModel().getChildCount(t)?0==e.getModel().getEdgeCount(t)&&(n=e.findTreeRoots(e.getDefaultParent())):n=e.findTreeRoots(t),null!=n&&n.length>0&&(t=n[0]),null!=t){var l=new mxCompactTreeLayout(e,!1);l.edgeRouting=!1,l.levelDistance=30,i(l.levelDistance,mxUtils.bind(this,function(n){l.levelDistance=n,this.editorUi.executeLayout(function(){l.execute(e.getDefaultParent(),t)},!0)}))}}),n),t.addItem(mxResources.get("radialTree"),null,mxUtils.bind(this,function(){var t=e.getSelectionCell(),n=null;if(null==t||0==e.getModel().getChildCount(t)?0==e.getModel().getEdgeCount(t)&&(n=e.findTreeRoots(e.getDefaultParent())):n=e.findTreeRoots(t),null!=n&&n.length>0&&(t=n[0]),null!=t){var l=new mxRadialTreeLayout(e,!1);l.levelDistance=80,l.autoRadius=!0,i(l.levelDistance,mxUtils.bind(this,function(n){l.levelDistance=n,this.editorUi.executeLayout(function(){l.execute(e.getDefaultParent(),t),e.isSelectionEmpty()||(t=e.getModel().getParent(t),e.getModel().isVertex(t)&&e.updateGroupBounds([t],2*e.gridSize,!0))},!0)}))}}),n),t.addSeparator(n),t.addItem(mxResources.get("organic"),null,mxUtils.bind(this,function(){var t=new mxFastOrganicLayout(e);i(t.forceConstant,mxUtils.bind(this,function(n){t.forceConstant=n,this.editorUi.executeLayout(function(){var n=e.getSelectionCell();null!=n&&0!=e.getModel().getChildCount(n)||(n=e.getDefaultParent()),t.execute(n),e.getModel().isVertex(n)&&e.updateGroupBounds([n],2*e.gridSize,!0)},!0)}))}),n),t.addItem(mxResources.get("circle"),null,mxUtils.bind(this,function(){var t=new mxCircleLayout(e);this.editorUi.executeLayout(function(){var n=e.getSelectionCell();null!=n&&0!=e.getModel().getChildCount(n)||(n=e.getDefaultParent()),t.execute(n),e.getModel().isVertex(n)&&e.updateGroupBounds([n],2*e.gridSize,!0)},!0)}),n)}))),this.put("navigation",new Menu(mxUtils.bind(this,function(e,t){this.addMenuItems(e,["home","-","exitGroup","enterGroup","-","expand","collapse","-","collapsible"],t)}))),this.put("arrange",new Menu(mxUtils.bind(this,function(e,t){this.addMenuItems(e,["toFront","toBack","-"],t),this.addSubmenu("direction",e,t),this.addMenuItems(e,["turn","-"],t),this.addSubmenu("align",e,t),this.addSubmenu("distribute",e,t),e.addSeparator(t),this.addSubmenu("navigation",e,t),this.addSubmenu("insert",e,t),this.addSubmenu("layout",e,t),this.addMenuItems(e,["-","group","ungroup","removeFromGroup","-","clearWaypoints","autosize"],t)}))).isEnabled=t,this.put("insert",new Menu(mxUtils.bind(this,function(e,t){this.addMenuItems(e,["insertLink","insertImage"],t)}))),this.put("view",new Menu(mxUtils.bind(this,function(e,t){this.addMenuItems(e,(null!=this.editorUi.format?["formatPanel"]:[]).concat(["outline","layers","-","pageView","pageScale","-","scrollbars","tooltips","-","grid","guides","-","connectionArrows","connectionPoints","-","resetView","zoomIn","zoomOut"],t))}))),this.put("viewPanels",new Menu(mxUtils.bind(this,function(e,t){null!=this.editorUi.format&&this.addMenuItems(e,["formatPanel"],t),this.addMenuItems(e,["outline","layers"],t)}))),this.put("viewZoom",new Menu(mxUtils.bind(this,function(t,n){this.addMenuItems(t,["resetView","-"],n);for(var i=[.25,.5,.75,1,1.25,1.5,2,3,4],l=0;l<i.length;l++)!function(i){t.addItem(100*i+"%",null,function(){e.zoomTo(i)},n)}(i[l]);this.addMenuItems(t,["-","fitPageWidth","fitPage","fitTwoPages"],n)}))),this.put("file",new Menu(mxUtils.bind(this,function(e,t){this.addMenuItems(e,["new","open","-","save","saveAs","-","import","export","-","pageSetup","print"],t)}))),this.put("edit",new Menu(mxUtils.bind(this,function(e,t){this.addMenuItems(e,["undo","redo","-","cut","copy","paste","delete","-","duplicate","-","editData","editTooltip","editStyle","-","edit","-","editLink","openLink","-","selectVertices","selectEdges","selectAll","selectNone","-","lockUnlock"])}))),this.put("extras",new Menu(mxUtils.bind(this,function(e,t){this.addMenuItems(e,["copyConnect","collapseExpand","-","editDiagram"])}))),this.put("help",new Menu(mxUtils.bind(this,function(e,t){this.addMenuItems(e,["help","-","about"])})))},Menus.prototype.put=function(e,t){return this.menus[e]=t,t},Menus.prototype.get=function(e){return this.menus[e]},Menus.prototype.addSubmenu=function(e,t,n,i){var l=this.get(e);if(null!=l){var o=l.isEnabled();if(t.showDisabled||o){var s=t.addItem(i||mxResources.get(e),null,null,n,null,o);this.addMenu(e,t,s)}}},Menus.prototype.addMenu=function(e,t,n){var i=this.get(e);null!=i&&(t.showDisabled||i.isEnabled())&&this.get(e).execute(t,n)},Menus.prototype.addInsertTableItem=function(e){var t=this.editorUi.editor.graph;var n=e.addItem("",null,mxUtils.bind(this,function(e){var n=t.getParentByName(mxEvent.getSource(e),"TD");if(null!=n&&null!=t.cellEditor.textarea){for(var i=t.getParentByName(n,"TR"),l=t.cellEditor.textarea.getElementsByTagName("table"),o=[],s=0;s<l.length;s++)o.push(l[s]);t.container.focus(),t.pasteHtmlAtCaret(function(e,t){for(var n=["<table>"],i=0;i<e;i++){n.push("<tr>");for(var l=0;l<t;l++)n.push("<td><br></td>");n.push("</tr>")}return n.push("</table>"),n.join("")}(i.sectionRowIndex+1,n.cellIndex+1));var r=t.cellEditor.textarea.getElementsByTagName("table");if(r.length==o.length+1)for(s=r.length-1;s>=0;s--)if(0==s||r[s]!=o[s-1]){t.selectNode(r[s].rows[0].cells[0]);break}}})),i='<img src="'+mxClient.imageBasePath+'/transparent.gif" width="16" height="16"/>';n.firstChild.innerHTML="";var l=function(e,t){var n=document.createElement("table");n.setAttribute("border","1"),n.style.borderCollapse="collapse",mxClient.IS_QUIRKS||n.setAttribute("cellPadding","8");for(var l=0;l<e;l++)for(var o=n.insertRow(l),s=0;s<t;s++){var r=o.insertCell(-1);mxClient.IS_QUIRKS&&(r.innerHTML=i)}return n}(5,5);n.firstChild.appendChild(l);var o=document.createElement("div");o.style.padding="4px",o.style.fontSize=Menus.prototype.defaultFontSize+"px",o.innerHTML="1x1",n.firstChild.appendChild(o),mxEvent.addListener(l,"mouseover",function(e){var n=t.getParentByName(mxEvent.getSource(e),"TD");if(null!=n){var s=t.getParentByName(n,"TR");!function(e,t,n){for(var l=e.rows.length;l<t;l++)for(var o=e.insertRow(l),s=0;s<e.rows[0].cells.length;s++){var r=o.insertCell(-1);mxClient.IS_QUIRKS&&(r.innerHTML=i)}for(l=0;l<e.rows.length;l++)for(s=(o=e.rows[l]).cells.length;s<n;s++)r=o.insertCell(-1),mxClient.IS_QUIRKS&&(r.innerHTML=i)}(l,Math.min(20,s.sectionRowIndex+2),Math.min(20,n.cellIndex+2)),o.innerHTML=n.cellIndex+1+"x"+(s.sectionRowIndex+1);for(var r=0;r<l.rows.length;r++)for(var a=l.rows[r],u=0;u<a.cells.length;u++){var d=a.cells[u];r<=s.sectionRowIndex&&u<=n.cellIndex?d.style.backgroundColor="blue":d.style.backgroundColor="white"}mxEvent.consume(e)}})},Menus.prototype.edgeStyleChange=function(e,t,n,i,l,o,s){return e.addItem(t,null,mxUtils.bind(this,function(){var e=this.editorUi.editor.graph;e.stopEditing(!1),e.getModel().beginUpdate();try{for(var t=e.getSelectionCells(),l=[],o=0;o<t.length;o++){var r=t[o];if(e.getModel().isEdge(r)){if(s){var a=e.getCellGeometry(r);null!=a&&((a=a.clone()).points=null,e.getModel().setGeometry(r,a))}for(var u=0;u<n.length;u++)e.setCellStyles(n[u],i[u],[r]);l.push(r)}}this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",n,"values",i,"cells",l))}finally{e.getModel().endUpdate()}}),o,l)},Menus.prototype.styleChange=function(e,t,n,i,l,o,s,r){var a=this.createStyleChangeFunction(n,i);return e.addItem(t,null,mxUtils.bind(this,function(){var e=this.editorUi.editor.graph;null!=s&&e.cellEditor.isContentEditing()?s():a(r)}),o,l)},Menus.prototype.createStyleChangeFunction=function(e,t){return mxUtils.bind(this,function(n){var i=this.editorUi.editor.graph;i.stopEditing(!1),i.getModel().beginUpdate();try{for(var l=0;l<e.length;l++)i.setCellStyles(e[l],t[l]),e[l]==mxConstants.STYLE_ALIGN&&i.updateLabelElements(i.getSelectionCells(),function(e){e.removeAttribute("align"),e.style.textAlign=null});null!=n&&n(),this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",e,"values",t,"cells",i.getSelectionCells()))}finally{i.getModel().endUpdate()}})},Menus.prototype.promptChange=function(e,t,n,i,l,o,s,r,a){return e.addItem(t,null,mxUtils.bind(this,function(){var e=this.editorUi.editor.graph,t=i,o=e.getView().getState(e.getSelectionCell());null!=o&&(t=o.style[l]||t);var s=new FilenameDialog(this.editorUi,t,mxResources.get("apply"),mxUtils.bind(this,function(t){if(null!=t&&t.length>0){e.getModel().beginUpdate();try{e.stopEditing(!1),e.setCellStyles(l,t)}finally{e.getModel().endUpdate()}null!=r&&r(t)}}),mxResources.get("enterValue")+(n.length>0?" "+n:""));this.editorUi.showDialog(s.container,300,80,!0,!0),s.init()}),o,a,s)},Menus.prototype.pickColor=function(e,t,n){var i=this.editorUi.editor.graph,l=226+17*(Math.ceil(ColorDialog.prototype.presetColors.length/12)+Math.ceil(ColorDialog.prototype.defaultColors.length/12));if(null!=t&&i.cellEditor.isContentEditing()){var o=i.cellEditor.saveSelection(),s=new ColorDialog(this.editorUi,n||"000000",mxUtils.bind(this,function(e){i.cellEditor.restoreSelection(o),document.execCommand(t,!1,e!=mxConstants.NONE?e:"transparent")}),function(){i.cellEditor.restoreSelection(o)});this.editorUi.showDialog(s.container,230,l,!0,!0),s.init()}else{null==this.colorDialog&&(this.colorDialog=new ColorDialog(this.editorUi)),this.colorDialog.currentColorKey=e;var r=i.getView().getState(i.getSelectionCell()),a="none";null!=r&&(a=r.style[e]||a),"none"==a?(a="ffffff",this.colorDialog.picker.fromString("ffffff"),this.colorDialog.colorInput.value="none"):this.colorDialog.picker.fromString(a),this.editorUi.showDialog(this.colorDialog.container,230,l,!0,!0),this.colorDialog.init()}},Menus.prototype.toggleStyle=function(e,t){var n=this.editorUi.editor.graph,i=n.toggleCellStyles(e,t);this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",[e],"values",[i],"cells",n.getSelectionCells()))},Menus.prototype.addMenuItem=function(e,t,n,i,l,o){var s=this.editorUi.actions.get(t);if(null!=s&&(e.showDisabled||s.isEnabled())&&s.visible){var r=e.addItem(o||s.label,null,function(){s.funct(i)},n,l,s.isEnabled());return s.toggleAction&&s.isSelected()&&e.addCheckmark(r,Editor.checkmarkImage),this.addShortcut(r,s),r}return null},Menus.prototype.addShortcut=function(e,t){if(null!=t.shortcut){var n=e.firstChild.nextSibling.nextSibling,i=document.createElement("span");i.style.color="gray",mxUtils.write(i,t.shortcut),n.appendChild(i)}},Menus.prototype.addMenuItems=function(e,t,n,i,l){for(var o=0;o<t.length;o++)"-"==t[o]?e.addSeparator(n):this.addMenuItem(e,t[o],n,i,null!=l?l[o]:null)},Menus.prototype.createPopupMenu=function(e,t,n){var i=this.editorUi.editor.graph;if(e.smartSeparators=!0,i.isSelectionEmpty()?this.addMenuItems(e,["undo","redo","pasteHere"],null,n):this.addMenuItems(e,["delete","copy","-"],null,n),i.isSelectionEmpty())this.addMenuItems(e,["-","selectVertices","selectEdges","selectAll"],null,n);else{t=i.getSelectionCell();var l=i.view.getState(t);if(null!=l){if(i.getModel().isEdge(t)&&"entityRelationEdgeStyle"!=mxUtils.getValue(l.style,mxConstants.STYLE_EDGE,null)&&"arrow"!=mxUtils.getValue(l.style,mxConstants.STYLE_SHAPE,null)){var o=i.selectionCellsHandler.getHandler(t);if(o instanceof mxEdgeHandler&&null!=o.bends&&o.bends.length>2){var s=o.getHandleForEvent(i.updateMouseEvent(new mxMouseEvent(n))),r=this.editorUi.actions.get("removeWaypoint");r.handler=o,r.index=s,s>0&&s<o.bends.length-1}var a=i.getModel().getGeometry(t);null!=a&&null!=a.points&&a.points.length>0}i.getSelectionCount()>1?(e.addSeparator(),this.addMenuItems(e,["group"],null,n)):1==i.getSelectionCount()&&!i.getModel().isEdge(t)&&!i.isSwimlane(t)&&i.getModel().getChildCount(t)>0&&(e.addSeparator(),this.addMenuItems(e,["ungroup"],null,n))}}},Menus.prototype.createMenubar=function(e){for(var t=new Menubar(this.editorUi,e),n=this.defaultMenuItems,i=0;i<n.length;i++)mxUtils.bind(this,function(e){var l=t.addMenu(mxResources.get(n[i]),mxUtils.bind(this,function(){e.funct.apply(this,arguments)}));this.menuCreated(e,l)})(this.get(n[i]));return t},Menus.prototype.menuCreated=function(e,t,n){null!=t&&(n=null!=n?n:"geItem",e.addListener("stateChanged",function(){t.enabled=e.enabled,e.enabled?(t.className=n,8==document.documentMode&&(t.style.color="")):(t.className=n+" mxDisabled",8==document.documentMode&&(t.style.color="#c3c3c3"))}))},Menubar.prototype.hideMenu=function(){this.editorUi.hideCurrentMenu()},Menubar.prototype.addMenu=function(e,t,n){var i=document.createElement("a");return i.className="geItem",mxUtils.write(i,e),this.addMenuHandler(i,t),null!=n?this.container.insertBefore(i,n):this.container.appendChild(i),i},Menubar.prototype.addMenuHandler=function(e,t){if(null!=t){var n=!0,i=mxUtils.bind(this,function(i){if(n&&null==e.enabled||e.enabled){this.editorUi.editor.graph.popupMenuHandler.hideMenu();var l=new mxPopupMenu(t);l.div.className+=" geMenubarMenu",l.smartSeparators=!0,l.showDisabled=!0,l.autoExpand=!0,l.hideMenu=mxUtils.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(l,arguments),this.editorUi.resetCurrentMenu(),l.destroy()});var o=mxUtils.getOffset(e);l.popup(o.x,o.y+e.offsetHeight,null,i),this.editorUi.setCurrentMenu(l,e)}mxEvent.consume(i)});mxEvent.addListener(e,"mousemove",mxUtils.bind(this,function(t){null!=this.editorUi.currentMenu&&this.editorUi.currentMenuElt!=e&&(this.editorUi.hideCurrentMenu(),i(t))})),mxEvent.addListener(e,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function(t){n=this.currentElt!=e,t.preventDefault()})),mxEvent.addListener(e,"click",mxUtils.bind(this,function(e){i(e),n=!0}))}},Menubar.prototype.destroy=function(){},mxUtils.extend(Menu,mxEventSource),Menu.prototype.isEnabled=function(){return this.enabled},Menu.prototype.setEnabled=function(e){this.enabled!=e&&(this.enabled=e,this.fireEvent(new mxEventObject("stateChanged")))},Menu.prototype.execute=function(e,t){this.funct(e,t)},EditorUi.prototype.createMenus=function(){return new Menus(this)};